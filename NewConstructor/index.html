<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>
  /**
   * new 的过程
   * 1. 创建一个空的简单JavaScript对象（即{}）；
   * 2. 链接该对象（设置该对象的constructor）到另一个对象 ；
   * 3. 将步骤 1 新创建的对象作为this的上下文 ；
   * 4. 如果该函数没有返回对象，则返回this。
   * */
  function newObject() {
    const obj = {}; // 1. 创建空的对象
    const Constructor = Array.prototype.shift.call(arguments); // 获取传入的对象的构造函数
    obj.__proto__ = Constructor.prototype; // 2. 将对象的原型属性挂载在简单对象的__proto__之上
    const res = Constructor.apply(obj, arguments); // 3. 修改this指向
    return res instanceof Object ? res : obj; // 4. 判断返回值是否为对象，如果不是则返回创建的对象，是的话直接返回
  }

  function Teacher() {
    this.name = '老师';
    this.age = 24;
  }

  const t = newObject(Teacher);

  console.log(t);
  console.log(t instanceof Teacher);
</script>
</body>
</html>
